$("body").on("submit",".js-pin",function(a){$(".js-pin .input").removeClass("error"),$(".js-pin .input-error").html("");var b=$.trim($('input[name="pin"]').val());return b.length>0?$.ajax({type:"POST",url:"/pin/_validate",dataType:"JSON",data:$("#pin-form").serialize(),success:function(a){"error"==a.status?($(".js-pin .input").addClass("error"),$(".js-pin .input-error").html(a.msg)):pinActivate(a,b)},error:function(a,b,c){$(".js-pin .input").addClass("error"),$(".js-pin .input-error").html("Произошла ошибка, обновите страницу")}}):($(".js-pin .input").addClass("error"),$(".js-pin .input-error").html("Вы ввели некорректный пин-код")),!1}),$(document).on("keyup",".js-pin-input",function(){$(this).val().length>0?$(".js-pin .btn").removeClass("disabled"):$(".js-pin .btn").addClass("disabled")});var pinActivate=function(a,b){var c=a.title;$.ajax({type:"POST",url:"/pin/_activate",dataType:"JSON",data:$("#pin-form").serialize(),success:function(a){"error"==a.status?($(".js-pin .input").addClass("error"),$(".js-pin .input-error").html(a.msg)):($(".js-pin").remove(),1==a.info.id_type?($(".ovl-pin__inner h2").html("Пин-код активирован").after("<p>Ты получил <b>"+c+'</b>.</p>            <div class="btn">              <div class="btn__text">Скачать</div>              <span class="b-link js-reg-download"></span>            </div>'),initBlock("/user/_auth",!0)):$(".ovl-pin__inner h2").html("Пин-код активирован").after("<p>Ты получил <b>"+c+'</b>.</p>            <div class="btn">              <div class="btn__text">Отлично!</div>              <span class="b-link js-ovl-close"></span>            </div>'))}})};